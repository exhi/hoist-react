//------------------------
// NavBar
//------------------------
.bp3-navbar, .bp3-dark .bp3-navbar {
  display: flex;
  align-items: center;
  flex-wrap: nowrap;
  color: var(--xh-navbar-color);
  background-color: var(--xh-navbar-bg);
  height: var(--xh-navbar-height-px);
  border-bottom: 1px solid var(--xh-navbar-border-color);
  padding: 0 var(--xh-pad-px);

  // Curiously, Admin Log Viewer would cause navbar to shrink without min-height
  min-height: var(--xh-navbar-height-px);

  .bp3-navbar-divider {
    border-left-color: var(--xh-tbar-separator-color);
  }

  > * {
    white-space: nowrap;
    flex-shrink: 0;
  }

  .bp3-navbar-heading {
    color: var(--xh-navbar-title-color);
    font-size: var(--xh-navbar-title-font-size-px);
    margin-left: var(--xh-pad-px);
  }

  .bp3-navbar-group {
    height: var(--xh-navbar-height-px);

    .bp3-navbar-divider {
      margin: 0 var(--xh-pad-px);
    }

    // Replace default float behaviour in favour of flexbox
    float: none;

    > .svg-inline--fa {
      margin: 0 5px 0 0;
    }

    &.bp3-align-left {
      // Flex simulates left alignment
      flex: 1;

      // Primary app icon
      > svg:first-child {
        color: var(--xh-navbar-title-color);
      }
    }

    &.bp3-align-right {
      > *:not(.bp3-navbar-divider) {
        margin-left: var(--xh-pad-px);
      }
      .bp3-navbar-divider {
        margin-right: 0;
      }
    }
  }
}


//------------------------
// Tabs
//------------------------
.bp3-tab-panel > div {
  margin: 0 !important;  // TODO - investigate this....
}

.bp3-tabs:not(.bp3-vertical) > .bp3-tab-list {
  padding-left: var(--xh-pad-px);
}


//------------------------
// Dialog + Masking
//------------------------
.bp3-dialog {
  padding-bottom: 0;
  border-radius: var(--xh-border-radius-px);
  border: var(--xh-popup-border-width-px) solid var(--xh-popup-border-color);

  .bp3-dialog-header {
    color: var(--xh-popup-title-text-color);
    background-color: var(--xh-popup-title-bg);
    font-size: var(--xh-popup-title-font-size-px);
    padding-left: var(--xh-pad-px);
    border-top-right-radius: var(--xh-border-radius-px);
    border-top-left-radius: var(--xh-border-radius-px);

    .bp3-heading, .bp3-icon {
      color: var(--xh-popup-title-text-color);
    }

    svg:first-child {
      margin-right: var(--xh-pad-px);
    }
  }

  .bp3-dialog-body {
    word-break: break-word;
  }
}

.bp3-dialog-container {
  background-color: var(--xh-mask-bg);
}

.bp3-dark .bp3-menu, .bp3-menu {
  background-color: var(--xh-bg-alt);
}


//------------------------
// Buttons
//------------------------
.bp3-button {
  // Use padding vars, tighter default LR padding (driven in part by our minimal mode default).
  padding: var(--xh-pad-half-px) var(--xh-pad-half-px);

  // Except in button groups, which are already compressing buttons more closely together.
  .bp3-button-group & {
    padding: var(--xh-pad-half-px) var(--xh-pad-px);
  }

  border-radius: var(--xh-border-radius-px);
  font-size: var(--xh-button-font-size-px);
  white-space: nowrap;

  &:not([class*="bp3-intent-"]) {
    color: var(--xh-button-text-color);
    .bp3-dark & {
      color: var(--xh-button-text-color);
    }
  }

  &.bp3-disabled {
    opacity: 0.6;
  }

  &:not(.bp3-minimal) {
    &.bp3-intent-primary {
      background-color: var(--xh-intent-primary);
    }
    &.bp3-intent-danger {
      background-color: var(--xh-intent-danger);
    }
    &.bp3-intent-success {
      background-color: var(--xh-intent-success);
    }
    &.bp3-intent-warning {
      background-color: var(--xh-intent-warning);
    }
  }
}

//------------------------
// Toasts
//------------------------
.bp3-toast {
  padding-left: 5px;

  &.bp3-intent-primary {
    background-color: var(--xh-intent-primary);
  }
  &.bp3-intent-danger {
    background-color: var(--xh-intent-danger);
  }
  &.bp3-intent-success {
    background-color: var(--xh-intent-success);
  }
  &.bp3-intent-warning {
    background-color: var(--xh-intent-warning);
  }

  .bp3-toast-message {
    word-break: break-word;
  }
}

//------------------------
// Forms + Inputs
//------------------------
.bp3-input, .bp3-dark .bp3-input, textarea.bp3-input, .bp3-dark textarea.bp3-input, .bp3-input-ghost {
  color: var(--xh-input-text-color);
  background: var(--xh-input-bg);
  font-size: var(--xh-font-size);
}

// Expose CSS var for box-shadow tweaking
.bp3-input:not(.bp3-active):not(:focus) {
  box-shadow: var(--xh-form-field-box-shadow);
}

// Override Blueprint textarea and switch input dark theme
.bp3-dark textarea.bp3-input {
  box-shadow: var(--xh-form-field-box-shadow);
}

.bp3-dark .bp3-control.bp3-switch input ~ .bp3-control-indicator {
  box-shadow: var(--xh-form-field-box-shadow) !important;
}

.bp3-dark .bp3-control.bp3-switch:hover input ~ .bp3-control-indicator {
  background-color:#202b33;
}

/* Apply blueprint styling to non-blueprint icons within input groups */
.bp3-input-group svg:not(.bp3-icon) {
  position: absolute;
  top: 0;
  line-height: 1;
  font-size: var(--xh-font-size-large-px);
  font-weight: 400;
  font-style: normal;
  -moz-osx-font-smoothing: grayscale;
  -webkit-font-smoothing: antialiased;
  z-index: 1;
  margin: 7px;
  color: var(--xh-text-color-muted);
}

// Avoid misaligned rightIcon within inputs.
.bp3-button svg:not(.bp3-icon):first-child:last-child, .bp3-button .bp3-spinner + svg:not(.bp3-icon):last-child {
  margin-left: 0;
}

// Controls ship with default bottom and (inline) right margins. We expose variables
// to customize and default those to 0 to avoid adding margins by default.
.bp3-control {
  margin-bottom: var(--xh-form-field-margin-bottom);

  &.bp3-inline {
    margin-right: var(--xh-form-field-margin-right);
  }
}
