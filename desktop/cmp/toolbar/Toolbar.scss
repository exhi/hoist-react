.xh-toolbar {
  padding: var(--xh-pad-half-px) var(--xh-pad-px) var(--xh-pad-half-px) var(--xh-pad-half-px);
  color: var(--xh-tbar-text-color);
  background-color: var(--xh-tbar-bg);
  width: 100%;
  flex: none;
  align-items: center;
  flex-wrap: nowrap;

  // Overflow box
  .bp3-overflow-list {
    flex: 1;
    align-items: center;

    > * {
      white-space: nowrap;

      // The overflow space needs to be able to shrink - BP checks this to determine overflow
      &:not(.bp3-overflow-list-spacer) {
        flex-shrink: 0;
      }

      &:not([class*='xh-no-pad']) {
        margin-left: var(--xh-tbar-item-pad-px);
      }
    }
  }

  // Non-overflow mode
  &:not(&--overflow) > * {
    white-space: nowrap;
    flex-shrink: 0;

    &:not([class*='xh-no-pad']) {
      margin-left: var(--xh-tbar-item-pad-px);
    }
  }

  &:not(&--vertical) {
    min-height: var(--xh-tbar-min-size-px);

    // Selected via not-last to account for panels, which dock a header above the tbar.
    &:not(:last-child) {
      border-bottom: 1px solid var(--xh-tbar-border-color);
    }

    &:last-child {
      border-top: 1px solid var(--xh-tbar-border-color);
    }

    .xh-toolbar__separator {
      border-left: 1px solid var(--xh-tbar-separator-color);
      height: 20px;  // matches BluePrint navBarSeparator
      margin-left: calc(var(--xh-tbar-item-pad) * 2px);
      margin-right: var(--xh-tbar-item-pad-px);
    }
  }

  // Vertical mode
  &--vertical {
    width: var(--xh-tbar-min-size-px);
    padding: 0 var(--xh-pad-half-px) var(--xh-pad-px) var(--xh-pad-half-px);

    > *:not([class*='xh-no-pad']) {
      margin-top: var(--xh-tbar-item-pad-px);
      margin-left: 0;
    }

    .xh-toolbar__separator {
      border-bottom: 1px solid var(--xh-tbar-separator-color);
      width: 20px;
    }

    &:first-child {
      border-right: 1px solid var(--xh-tbar-border-color);
    }

    &:last-child {
      border-left: 1px solid var(--xh-tbar-border-color);
    }
  }

  // Form field margins (if set) are not desired within Toolbars.
  .bp3-control {
    margin-bottom: 0;

    &.bp3-inline {
      margin-right: 0;
    }
  }
}

.xh-toolbar-overflow-popover {
  border: 1px solid var(--xh-tbar-border-color);

  .bp3-popover-arrow-border,
  .bp3-popover-arrow-fill {
    fill: var(--xh-tbar-border-color) !important;
  }

  .bp3-popover-content {
    color: var(--xh-tbar-text-color);
    background-color: var(--xh-tbar-bg);

    & > .xh-vbox {
      align-items: flex-start;

      & > * {
        margin: 2px var(--xh-tbar-item-pad-px);
      }

      .xh-toolbar__separator {
        border-bottom: 1px solid var(--xh-tbar-separator-color);
        align-self: stretch;
      }
    }
  }
}
